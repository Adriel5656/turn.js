<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Agape 2月訊</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="turn.js"></script>

    <style type="text/css">
        body { background: #525252; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        #flipbook { width: 800px; height: 566px; }
        #flipbook .page { width: 400px; height: 566px; background-color: white; background-size: 100% 100%; background-repeat: no-repeat; }
        /* 讓滑鼠變成手指形狀，提示可以點擊 */
        #flipbook .page:hover { cursor: pointer; }
    </style>
</head>
<body>

<div id="flipbook"></div>

<script type="text/javascript">
    $(window).ready(function() {
        // 動態生成 12 頁
        for (var i = 1; i <= 12; i++) {
            $('#flipbook').append('<div class="page" style="background-image:url(pages/' + i + '.jpeg)"></div>');
        }

        // 初始化翻頁插件
        $('#flipbook').turn({
            width: 800,
            height: 566,
            autoCenter: true,
            display: 'double', // 雙頁模式
            acceleration: true,
            gradients: true,
            duration: 600 // 翻頁速度
        });

        // 【關鍵代碼】點擊頁面即翻頁
        $('#flipbook').bind('touchstart mousedown', function(e) {
            var offset = $(this).offset();
            var relativeX = (e.pageX || e.originalEvent.touches[0].pageX) - offset.left;

            // 如果點擊書的右半邊，翻下一頁；點擊左半邊，翻上一頁
            if (relativeX > $(this).width() / 2) {
                $('#flipbook').turn('next');
            } else {
                $('#flipbook').turn('previous');
            }
            e.preventDefault();
        });
    });

    // 鍵盤翻頁支持
    $(window).bind('keydown', function(e) {
        if (e.keyCode == 37) $('#flipbook').turn('previous');
        else if (e.keyCode == 39) $('#flipbook').turn('next');
    });
</script>

</body>
</html>
